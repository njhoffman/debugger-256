{"version":3,"sources":["../lib/parser.js"],"names":["_","require","options","subsystems","module","exports","messages","subsystem","render","subsystemsLength","maxBy","ss","length","out","message","i","isObject","nextMsg","test","match","forEach","renderObj","colorTag","isUndefined","customColors","console","warn","customMessage","replace","Array","join"],"mappings":";;AAAA,IAAMA,IAAIC,QAAQ,QAAR,CAAV;;eAC8BA,QAAQ,YAAR,C;IAAxBC,O,YAAAA,O;IAASC,U,YAAAA,U;;AAEfC,OAAOC,OAAP,GAAiB,UAACC,QAAD,EAAWC,SAAX,EAAsBC,MAAtB,EAAiC;AAChD,MAAMC,mBAAmBT,EAAEU,KAAF,CAAQP,UAAR,EAAoB,UAACQ,EAAD;AAAA,WAAQA,GAAGC,MAAX;AAAA,GAApB,EAAuCA,MAAvC,GAAgD,CAAzE;AACA,MAAIC,MAAM,EAAV;;AAFgD;AAI9C,QAAIC,UAAUR,SAASS,CAAT,CAAd;AACA,QAAIf,EAAEgB,QAAF,CAAWF,OAAX,CAAJ,EAAyB;AACvBD,aAAO,OAAOL,OAAOM,OAAP,EAAgBL,mBAAmB,CAAnC,CAAd;AACD,KAFD,MAEO;AACL,UAAIQ,UAAUX,SAASS,IAAI,CAAb,CAAd;AACA,UAAI,OAAOG,IAAP,CAAYJ,OAAZ,KAAwBG,QAAQ,OAAR,CAA5B,EAA8C;AAC5CF;AACA;AACAD,gBAAQK,KAAR,CAAc,UAAd,EAA0BC,OAA1B,CAAkC,yBAAiB;AACjD,cAAIC,YAAY,EAAhB;AACA,cAAIC,WAAWL,WAAWA,QAAQ,OAAR,CAA1B;AACA,cAAIK,YAAYtB,EAAEuB,WAAF,CAAcrB,QAAQsB,YAAR,CAAqBF,QAArB,CAAd,CAAhB,EAA+D;AAC7DG,oBAAQC,IAAR,+CAAyDJ,QAAzD;AACD,WAFD,MAEO,IAAIA,QAAJ,EAAc;AACnBD,sBAAUC,QAAV,IAAsBK,cAAcC,OAAd,CAAsB,IAAtB,EAA4B,EAA5B,CAAtB;AACAd,sBAAUA,QAAQc,OAAR,CAAgBD,aAAhB,EAA+BnB,OAAOa,SAAP,CAA/B,CAAV;AACD;AACDJ,oBAAUX,SAASS,IAAI,CAAb,CAAV;AACAA;AACD,SAXD;AAYAF,eAAOgB,MAAMpB,mBAAmBF,UAAUK,MAAnC,EAA2CkB,IAA3C,CAAgD,GAAhD,IAAuD,KAAvD,GAA+DhB,OAAtE;AACD,OAhBD,MAgBO,IAAIC,MAAM,CAAV,EAAa;AAClBF,eAAOgB,MAAMpB,mBAAmBF,UAAUK,MAAnC,EAA2CkB,IAA3C,CAAgD,GAAhD,IAAuD,KAAvD,GAA+DtB,OAAOM,OAAP,CAAtE;AACD,OAFM,MAEA;AACLD,eAAO,OAAOgB,MAAMpB,mBAAmB,CAAzB,EAA4BqB,IAA5B,CAAiC,GAAjC,CAAP,GAA+CtB,OAAOM,OAAP,CAAtD;AACD;AACF;AA9B6C;;AAGhD,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIT,SAASM,MAA7B,EAAqCG,GAArC,EAA0C;AAAA;AA4BzC;AACD,SAAOF,GAAP;AACD,CAjCD","file":"parser.js","sourcesContent":["const _ = require('lodash');\nlet { options, subsystems } = require('./settings');\n\nmodule.exports = (messages, subsystem, render) => {\n  const subsystemsLength = _.maxBy(subsystems, (ss) => ss.length).length + 1;\n  let out = '';\n  for (var i = 0; i < messages.length; i++) {\n    let message = messages[i];\n    if (_.isObject(message)) {\n      out += '\\n' + render(message, subsystemsLength + 7);\n    } else {\n      let nextMsg = messages[i + 1];\n      if (/%.*%/.test(message) && nextMsg['color']) {\n        i++;\n        // check for special color directive\n        message.match(/(%.*?%)/g).forEach(customMessage => {\n          let renderObj = {};\n          let colorTag = nextMsg && nextMsg['color'];\n          if (colorTag && _.isUndefined(options.customColors[colorTag])) {\n            console.warn(`\\n -- Debugger Warning: Color Directive \"${colorTag}\" was not found in the settings. --\\n`);\n          } else if (colorTag) {\n            renderObj[colorTag] = customMessage.replace(/%/g, '');\n            message = message.replace(customMessage, render(renderObj));\n          }\n          nextMsg = messages[i + 1];\n          i++;\n        });\n        out += Array(subsystemsLength - subsystem.length).join(' ') + '   ' + message;\n      } else if (i === 0) {\n        out += Array(subsystemsLength - subsystem.length).join(' ') + '   ' + render(message);\n      } else {\n        out += '\\n' + Array(subsystemsLength + 7).join(' ') + render(message);\n      }\n    }\n  }\n  return out;\n};\n"]}