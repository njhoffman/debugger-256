{"version":3,"sources":["../lib/settings.js"],"names":["fs","require","path","appRoot","merge","options","colors","keys","fg","number","grayscale","customColors","bold","blue","lightBlue","darkBlue","red","lightRed","darkRed","green","lightGreen","darkGreen","purple","lightPurple","darkPurple","cyan","lightCyan","darkCyan","yellow","orange","white","gray","fatal","error","warn","log","info","debug","trace","colorTag","getOptions","subsystems","getSubsystems","conf","getConf","fileChange","fileName","console","loadConfFile","currLocation","resolve","__dirname","rootLocation","toString","existsSync","watchFile","interval","bind","undefined","JSON","parse","readFileSync","initSettings","customOptions"],"mappings":"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","file":"settings.js","sourcesContent":["const fs = require('fs');\nconst path = require('path');\nconst appRoot = require('app-root-path');\nconst { merge } = require('lodash');\n\nexport let options = {\n  /* prettyjson-256 options */\n  colors:     {\n    keys:    { fg:  [0, 2, 1] },\n    number:  { fg: { grayscale: 11 } }\n  },\n  customColors : {\n    bold:                     { grayscale: 23 },\n    blue:                     { fg: [0, 0, 4] },\n    lightBlue:                { fg: [0, 1, 5] },\n    darkBlue:                 { fg: [0, 0, 3] },\n    red:                      { fg: [3, 0, 0] },\n    lightRed:                 { fg: [5, 0, 0] },\n    darkRed:                  { fg: [1, 0, 0] },\n    green:                    { fg: [0, 3, 0] },\n    lightGreen:               { fg: [0, 5, 0] },\n    darkGreen:                { fg: [0, 1, 0] },\n    purple:                   { fg: [1, 0, 3] },\n    lightPurple:              { fg: [2, 0, 5] },\n    darkPurple:               { fg: [1, 0, 1] },\n    cyan:                     { fg: [2, 3, 4] },\n    lightCyan:                { fg: [2, 5, 5] },\n    darkCyan:                 { fg: [1, 2, 3] },\n    yellow:                   { fg: [4, 5, 0] },\n    orange:                   { fg: [5, 2, 0] },\n    white:                    { fg: [0, 3, 0] },\n    gray:                     { grayscale: 12 },\n\n    fatal:                    { fg: [5, 0, 0] },\n    error:                    { fg: [4, 0, 0] },\n    warn:                     { fg: [4, 2, 2] },\n    log:                      { fg: [0, 2, 4] },\n    info:                     { fg: [2, 2, 4] },\n    debug:                    { fg: [3, 3, 4] },\n    trace:                    { fg: [3, 4, 4] }\n  },\n  /* debugger-256 options */\n  colorTag: 'color'\n};\n\nexport let getOptions = () => options;\nexport let subsystems = [];\nexport const getSubsystems = () => subsystems;\nexport let conf = false;\nexport const getConf = () => conf;\n\nconst fileChange = (fileName) => {\n  console.info(`\\n -- Detected file change in: ${fileName}, reinitializing debugger-256`);\n  conf = loadConfFile();\n};\n\nexport const loadConfFile = () => {\n  // TODO: implement error handling\n  const currLocation = path.resolve(__dirname, '.debugger-256');\n  const rootLocation = path.resolve(appRoot.toString(), '.debugger-256');\n  if (fs.existsSync(currLocation)) {\n    !conf && console.info(`\\n -- Found debugger-256 configuration file: ${currLocation}, applying settings and watching for changes`);\n    fs.watchFile(currLocation, { interval: 500 },  fileChange.bind(undefined, currLocation));\n    return JSON.parse(fs.readFileSync(currLocation));\n  } else if (fs.existsSync(rootLocation)) {\n    !conf && console.info(`\\n -- Found debugger-256 configuration file: ${rootLocation}, applying settings and watching for changes.`);\n    fs.watchFile(rootLocation, { interval: 500 }, fileChange.bind(undefined, rootLocation));\n    return JSON.parse(fs.readFileSync(rootLocation));\n  }\n  return false;\n};\n\nexport const initSettings = (customOptions) => {\n  if (customOptions) {\n    merge(options, customOptions);\n  } else {\n    conf = loadConfFile();\n    if (conf && conf['_debugger-256']) {\n      merge(options, conf['_debugger-256']);\n    }\n  }\n  return options;\n};\n\ninitSettings();\n"]}